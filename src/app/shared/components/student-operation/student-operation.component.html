<button class="w-48 h-8 mt-0 mb-8 ml-0" nz-button [nzType]="'primary'" (click)="showModalScore1()"
  *ngIf="currentScore1Flag"><span>提交材料审核分数</span></button>

<!-- <button class="w-48 h-8 mt-0 mb-8 ml-8" nz-button [nzType]="'primary'" (click)="showModalScore2()"
  *ngIf="!currentScore1Flag"><span>提交面试分数</span></button> -->

<!-- 提交材料审核分数的对话框 -->
<nz-modal [(nzVisible)]="isVisibleScore1" nzTitle="提交材料审核分数" (nzOnCancel)="handleCancelScore1()"
  (nzOnOk)="handleOkScore1()" [nzOkLoading]="isOkLoadingScore1">
  <ng-container *nzModalContent>
    <nz-descriptions nzTitle="" nzBordered>
      <nz-descriptions-item nzTitle="材料审核分数">
        <nz-input-number [(ngModel)]="score1" [nzStep]="1"></nz-input-number>
      </nz-descriptions-item>
    </nz-descriptions>
  </ng-container>
  <div *nzModalFooter>
    <button nz-button nzType="default" (click)="handleCancelScore1()">取消</button>
    <button nz-button nzType="primary" (click)="handleOkScore1()" [nzLoading]="isOkLoadingScore1">确认提交</button>
  </div>
</nz-modal>

<!-- 提交面试分数的对话框 -->
<nz-modal [(nzVisible)]="isVisibleScore2" nzTitle="提交面试分数" (nzOnCancel)="handleCancelScore2()"
  (nzOnOk)="handleOkScore2()" [nzOkLoading]="isOkLoadingScore2">
  <ng-container *nzModalContent>
    <nz-descriptions nzTitle="" nzBordered>
      <nz-descriptions-item nzTitle="面试分数">
        <nz-input-number [(ngModel)]="score2" [nzStep]="1"></nz-input-number>
      </nz-descriptions-item>
    </nz-descriptions>
  </ng-container>
  <div *nzModalFooter>
    <button nz-button nzType="default" (click)="handleCancelScore2()">取消</button>
    <button nz-button nzType="primary" (click)="handleOkScore2()" [nzLoading]="isOkLoadingScore2">确认提交</button>
  </div>
</nz-modal>

<nz-descriptions nzTitle="申请状态信息" nzBordered>
  <nz-descriptions-item nzTitle="原始分数" *ngIf="currentScore1Flag">
    {{ currentStudentInfo.score1}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="最终分数" *ngIf="currentScore1Flag">
    {{ currentStudentInfo.finalscore1}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="材料审核分数" *ngIf="!currentScore1Flag">
    {{ currentStudentInfo.allscore1}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="面试分数">
    {{ currentStudentInfo.score2===-1?"未打分":currentStudentInfo.score2 }}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="入营资格审查">
    {{currentStudentInfo.pass1?"已通过":'审核中'}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="材料形式审查">
    {{status[currentStudentInfo.status]}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="面试是否确认参加">
    {{currentStudentInfo.confirm1>0?"已确认参加":currentStudentInfo.confirm1<0?'已拒绝参加':'待确认'}} </nz-descriptions-item>
</nz-descriptions>

<nz-descriptions nzTitle="学生申请表" nzBordered class="mt-4">
  <nz-descriptions-item nzTitle="姓名">
    {{currentStudentInfo.SignupTemplate.name}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="性别">
    {{currentStudentInfo.SignupTemplate.sex}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="出生年月">
    {{currentStudentInfo.SignupTemplate.birth}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="民族">
    {{currentStudentInfo.SignupTemplate.nation}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="政治面貌">
    {{currentStudentInfo.SignupTemplate.politic}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="学号">
    {{currentStudentInfo.SignupTemplate.sid}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="本人证件照" [nzSpan]="3">
    <div *ngIf="currentStudentInfo.SignupTemplate.photo!=''"><img src="{{currentStudentInfo.SignupTemplate.photo}}"
        class="w-auto h-auto border-gray-400 border-solid max-h-64">
    </div>
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="籍贯" nzSpan="3">
    {{currentStudentInfo.SignupTemplate.birthPlace}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="身份证号码" nzSpan="3">
    {{currentStudentInfo.SignupTemplate.id}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="本科院校" nzSpan="1">
    {{currentStudentInfo.SignupTemplate.university}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="选择意向导师(非必填项)" nzSpan="1">
    {{currentStudentInfo.SignupTemplate.tutor}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="本科院系" nzSpan="1">
    {{currentStudentInfo.SignupTemplate.department}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="本科专业">
    {{currentStudentInfo.SignupTemplate.major}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="入学时间">
    {{currentStudentInfo.SignupTemplate.enrollmentTime}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="电话">
    {{currentStudentInfo.SignupTemplate.phone}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="邮箱">
    {{currentStudentInfo.SignupTemplate.email}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="QQ">
    {{currentStudentInfo.SignupTemplate.qq}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="紧急电话">
    {{currentStudentInfo.SignupTemplate.emergencyPhone}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="家庭住址" nzSpan="3">
    {{currentStudentInfo.SignupTemplate.address}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="是否获取免试生资格" nzSpan="3">
    {{examFreestatus(currentStudentInfo.SignupTemplate.examFree)}}
  </nz-descriptions-item>
</nz-descriptions>
<nz-descriptions nzTitle="" nzBordered>

  <nz-descriptions-item nzTitle="申请人个人陈述及研究生阶段研究计划" [nzSpan]="3">
    {{currentStudentInfo.SignupTemplate.description}}
  </nz-descriptions-item>

  <nz-descriptions-item nzTitle="奖励与荣誉" [nzSpan]="3">
    {{currentStudentInfo.SignupTemplate.reward}}
  </nz-descriptions-item>

  <nz-descriptions-item nzTitle="已取得的科研成果" [nzSpan]="3">
    {{currentStudentInfo.SignupTemplate.achievements}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="拟报考推免生类型(第一志愿)" [nzSpan]="3">
    {{volunteerStatus(currentStudentInfo.SignupTemplate.volunteer1)}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="拟报考推免生类型(第二志愿)" [nzSpan]="3">
    {{volunteerStatus(currentStudentInfo.SignupTemplate.volunteer2)}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="绩点时间点 ">
    {{currentStudentInfo.SignupTemplate.scoreDate}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="申请人绩点 ">
    {{currentStudentInfo.SignupTemplate.getScore}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="绩点分制 ">
    {{currentStudentInfo.SignupTemplate.maxScore}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="年级排名 ">
    {{currentStudentInfo.SignupTemplate.getRank}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="年级总人数 ">
    {{currentStudentInfo.SignupTemplate.maxRank}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="外语cet4成绩">
    {{currentStudentInfo.SignupTemplate.cet4Score}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="外语cet6成绩">
    {{currentStudentInfo.SignupTemplate.cet6Score}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="其他英语成绩" [nzSpan]="2">
    {{currentStudentInfo.SignupTemplate.otherEnglishScore}}
  </nz-descriptions-item>
  <nz-descriptions-item nzTitle="申请人声明" [nzSpan]="3">
    本人郑重承诺，在“中山大学计算机学院夏令营活动系统”上填写的信息及上传的材料均真实、合法、有效、准确。在系统内，已经提交的申请信息将无法进行修改，若材料中包括错误、虚假、误导性信息，申请资格将被取消，且本人将承担有关责任。
  </nz-descriptions-item>

  <nz-descriptions-item nzTitle="申请人声明签名" [nzSpan]="2">
    <div *ngIf="currentStudentInfo.SignupTemplate.sign!=''"><img src="{{currentStudentInfo.SignupTemplate.sign}}"
        class="w-auto h-auto border-gray-400 border-solid max-h-16">
    </div>
  </nz-descriptions-item>

  <nz-descriptions-item nzTitle="申请人声明签名日期" [nzSpan]="1">
    {{currentStudentInfo.SignupTemplate.date}}
  </nz-descriptions-item>
</nz-descriptions>

<h4 nz-typography class="mt-4">学生上传证明材料</h4>
<nz-table #currentFileInTable [nzPageSize]="10" [nzData]='fileList!'>
  <thead>
    <tr>
      <th>文件名</th>
      <th>上传时间</th>
      <th>操作</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of currentFileInTable.data">
      <td>{{ data.filename }} </td>
      <td>{{ formatDateTime(data.date) }}</td>
      <td>
        <a nz-button nzType="link" (click)="downloadUpload(data,0)">预览</a>
        <nz-divider nzType="vertical"></nz-divider>
        <a nz-button nzType="link" (click)="downloadUpload(data,1)">下载</a>
      </td>
    </tr>
  </tbody>
</nz-table>
<!-- </nz-descriptions> -->

<button class="h-10 mt-2 w-60" (click)="statusPass()" nz-button nzType="primary" nz-tooltip
  nzTooltipTitle="在审核完学生的材料后请点击此按钮通过材料审核，以提醒学生不要再修改已提交材料，等待最终材料审核成绩" class="w-48 h-8 mt-2" *ngIf="!currentScore1Flag">
  通过材料审核
</button>
<br>
<button class="h-10 mt-3 mr-6 w-60" nz-button [nzType]="'primary'" nz-popconfirm nzPopconfirmTitle="确定要通过此学生入营资格审查吗？"
  nzPopconfirmPlacement="bottom" (nzOnConfirm)="setPass1()" (nzOnCancel)="Cancel()" nzOkText="确认通过" nzCancelText="取消"
  *ngIf="!currentScore1Flag"><span>通过此学生入营资格审查</span></button>

<button class="h-10 mt-3 w-60" nz-button [nzType]="'primary'" nz-popconfirm nzPopconfirmTitle="确定要取消此学生入营资格审查吗？"
  nzPopconfirmPlacement="bottom" (nzOnConfirm)="unsetPass1()" (nzOnCancel)="Cancel()" nzOkText="确认通过" nzCancelText="取消"
  *ngIf="!currentScore1Flag"><span>取消此学生入营资格审查</span></button>
<br>

<button class="h-10 mt-3 mr-6 w-60" nz-button [nzType]="'primary'" nz-popconfirm nzPopconfirmTitle="确定要修改此学生面试确认申请为同意吗？"
  nzPopconfirmPlacement="bottom" (nzOnConfirm)="setConfirm1()" (nzOnCancel)="Cancel()" nzOkText="确认通过" nzCancelText="取消"
  *ngIf="!currentScore1Flag"><span>修改此学生面试确认申请为同意</span></button>

<button class="h-10 mt-3 w-60" nz-button [nzType]="'primary'" nz-popconfirm nzPopconfirmTitle="确定要修改此学生面试确认申请为拒绝吗？"
  nzPopconfirmPlacement="bottom" (nzOnConfirm)="unsetConfirm1()" (nzOnCancel)="Cancel()" nzOkText="确认通过"
  nzCancelText="取消" *ngIf="!currentScore1Flag"><span>修改此学生面试确认申请为拒绝</span></button>
